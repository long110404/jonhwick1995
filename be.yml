# .github/workflows/be.yml
name: ğŸ›¡ï¸ Backend CI/CD

# KÃ­ch hoáº¡t khi cÃ³ push hoáº·c pull_request vÃ o branch main
on:
  push:
    branches: [ main ]
    paths:
      - 'backend/**' # CHá»ˆ cháº¡y náº¿u cÃ³ thay Ä‘á»•i trong thÆ° má»¥c 'backend/'
  pull_request:
    branches: [ main ]
    paths:
      - 'backend/**'

jobs:
  build-and-test-be:
    runs-on: ubuntu-latest

    # Thiáº¿t láº­p working directory máº·c Ä‘á»‹nh cho táº¥t cáº£ cÃ¡c steps
    defaults:
      run:
        working-directory: ./backend # Äiá»u chá»‰nh theo thÆ° má»¥c BE cá»§a báº¡n

    steps:
      - name: â¬‡ï¸ Checkout code
        uses: actions/checkout@v4

      - name: ğŸ Setup Python (VÃ­ dá»¥)
        uses: actions/setup-python@v5
        with:
          python-version: '3.10' # Äiá»u chá»‰nh version ngÃ´n ngá»¯/runtime cá»§a báº¡n

      - name: ğŸ“¦ Install dependencies
        run: pip install -r requirements.txt # Thay tháº¿ báº±ng lá»‡nh cÃ i Ä‘áº·t cá»§a báº¡n

      - name: ğŸ§ª Run tests
        run: pytest # Thay tháº¿ báº±ng lá»‡nh test thá»±c táº¿ cá»§a báº¡n

      # VÃ­ dá»¥ bÆ°á»›c build/publish Docker Image
      # - name: ğŸ³ Build & Push Docker image
      #   uses: docker/build-push-action@v5
      #   ...

  # ThÃªm job deploy náº¿u báº¡n muá»‘n triá»ƒn khai tá»± Ä‘á»™ng
  # deploy-be:
  #   needs: build-and-test-be
  #   runs-on: ubuntu-latest
  #   ...
